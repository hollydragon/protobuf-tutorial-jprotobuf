// protoc -I=../../../../src/main/java --java_out=../../../../src/main/java --proto_path=./ addressbook.proto

syntax = "proto2";

// The .proto file starts with a package declaration, which helps to prevent naming conflicts between different projects
package protos;

// java_package specifies in what Java package name your generated classes should live. If you don't specify this explicitly, it simply matches the package name given by the package declaration
option java_package = "com.example.protos";
// java_outer_classname option defines the class name which should contain all of the classes in this file. If you don't give a java_outer_classname explicitly, it will be generated by converting the file name to camel case
option java_outer_classname = "AddressBookProtos";

message Person {
	enum PhoneType {
		MOBILE = 0;
		HOME = 1;
		WORK = 2;
	}
	
	message Phone {
		required string no = 1;
		optional PhoneType phoneType = 2 [default = HOME];
	}
	
	// The " = 1", " = 2" markers on each element identify the unique "tag" that field uses in the binary encoding
	required string name = 1;

	// Tag numbers 1-15 require one less byte to encode than higher numbers, so as an optimization you can decide to use those tags for the commonly used or repeated elements
	required int32 id = 2;
	
	// Leaving tags 16 and higher for less-commonly used optional elements
	optional string email = 3;
	
	// Think of repeated fields as dynamically sized arrays
	repeated Phone phones = 4;
}

message AddressBook {
	repeated Person persons = 1;
}
